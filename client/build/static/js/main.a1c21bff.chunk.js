(this.webpackJsonpnoticely=this.webpackJsonpnoticely||[]).push([[0],{134:function(e,t){},135:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p}));var a=n(11),r=n.n(a),l=n(17),c=n(12),o=n.n(c),i=n(27),s=n(4),u=function(e,t,n){return function(){var a=Object(l.a)(r.a.mark((function a(l){var c,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l({type:s.a.USER.REGISTER_USER}),a.prev=1,a.next=4,o.a.post("/graphql",JSON.stringify({query:'\n            mutation {\n              registerUser(userInput: {name: "'.concat(e,'", email: "').concat(t,'", password: "').concat(n,'"}) {\n                _id\n                name,\n                email,\n                token\n              }\n            }\n          ')}));case 4:c=a.sent,u=c.data.data.registerUser,l({type:s.a.USER.REGISTER_USER_SUCCESS,payload:u}),i.a.setSession(u.token),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),l({type:s.a.USER.REGISTER_USER_FAIL,payload:a.t0.response.data.errors});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()},m=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:s.a.USER.LOGIN_USER}),e.prev=1,e.next=4,o.a.post("/graphql",JSON.stringify({query:"\n          query {\n            getUserInfo {\n              _id\n              name,\n              email,\n              token\n            }\n          }\n        "}));case 4:n=e.sent,a=n.data.data.getUserInfo,t({type:s.a.USER.LOGIN_USER_SUCCESS,payload:a}),i.a.setSession(a.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:s.a.USER.LOGIN_USER_FAIL,payload:e.t0.response.data.errors});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e,t){return function(){var n=Object(l.a)(r.a.mark((function n(a){var l,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:s.a.USER.LOGIN_USER}),n.prev=1,n.next=4,o.a.post("/graphql",JSON.stringify({query:'\n          query {\n            loginUser(loginInput: {email: "'.concat(e,'", password: "').concat(t,'"}) {\n              _id\n              name,\n              email,\n              token\n            }\n          }\n        ')}));case 4:l=n.sent,c=l.data.data.loginUser,a({type:s.a.USER.LOGIN_USER_SUCCESS,payload:c}),i.a.setSession(c.token),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a({type:s.a.USER.LOGIN_USER_FAIL,payload:n.t0.response.data.errors});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()},p=function(){return i.a.clearSession(),{type:s.a.USER.LOGOUT_USER}}},136:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return p}));var a=n(11),r=n.n(a),l=n(17),c=n(4),o=n(12),i=n.n(o),s=function(){return{type:c.a.LOCATION.INITIAL_MAP_SHOW}},u=function(e){return{type:c.a.LOCATION.SET_IP_LOCATION,payload:e}},m=function(e){return{type:c.a.LOCATION.SET_VALID_PLACE,payload:e}},d=function(e){return{type:c.a.LOCATION.SET_SELECTED_PLACE,payload:e}},p=function(){return function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:c.a.LOCATION.GET_PLACES}),e.prev=1,e.next=4,i.a.post("/graphql",JSON.stringify({query:"\n                        query {\n                            getPlaces {\n                                _id\n                                place_id\n                                name\n                                formattedAddress\n                                latlng {\n                                    lat\n                                    lng\n                                }\n                            }\n                        } \n                    "}));case 4:n=e.sent,a=n.data.data.getPlaces,t({type:c.a.LOCATION.GET_PLACES_SUCCESS,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:c.a.LOCATION.GET_PLACES_ERROR,payload:e.t0.response.data.errors});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},206:function(e,t,n){e.exports=n(448)},27:function(e,t,n){"use strict";var a=n(12),r=n.n(a),l=function(){var e=window.localStorage.getItem("jwt");return r.a.defaults.headers.common.Authorization="Bearer ".concat(e),r.a.defaults.headers.post["Content-Type"]="application/json",e};l(),t.a={setSession:function(e){window.localStorage.setItem("jwt",e),r.a.defaults.headers.common.Authorization="Bearer ".concat(e),r.a.defaults.headers.post["Content-Type"]="application/json"},getSession:l,clearSession:function(){window.localStorage.removeItem("jwt"),r.a.defaults.headers.common.Authorization=""}}},4:function(e,t,n){"use strict";var a={REGISTER_USER:"REGISTER_USER",REGISTER_USER_SUCCESS:"REGISTER_USER_SUCCESS",REGISTER_USER_FAIL:"REGISTER_USER_FAIL",LOGIN_USER:"LOGIN_USER",LOGIN_USER_SUCCESS:"LOGIN_USER_SUCCESS",LOGIN_USER_FAIL:"LOGIN_USER_FAIL",LOGOUT_USER:"LOGOUT_USER"},r={SET_IP_LOCATION:"SET_IP_LOCATION",SET_VALID_PLACE:"SET_VALID_PLACE",SET_SELECTED_PLACE:"SET_SELECTED_PLACE",GET_PLACES:"GET_PLACES",GET_PLACES_SUCCESS:"GET_PLACES_SUCCESS",GET_PLACES_ERROR:"GET_PLACES_ERROR",INITIAL_MAP_SHOW:"INITIAL_MAP_SHOW"},l={OPEN_FLYER_PANE:"OPEN_FLYER_PANE",SET_FLYER_MADE:"SET_FLYER_MADE",SET_MAKING_FLYER:"SET_MAKING_FLYER",SET_MAKING_FLYER_SUCCESS:"SET_MAKING_FLYER_SUCCESS",SET_MAKING_FLYER_FAIL:"SET_MAKING_FLYER_FAIL",SET_FLYERS:"SET_FLYERS",SET_FLYERS_SUCCESS:"SET_FLYERS_SUCCESS",SET_FLYERS_FAIL:"SET_FLYERS_FAIL",SET_SELECTED_FLYER:"SET_SELECTED_FLYER",SET_WISH_TO_DELETE_FLYER:"SET_WISH_TO_DELETE_FLYER",SET_DELETING_FLYER:"SET_DELETING_FLYER",SET_DELETED_FLYER:"SET_DELETED_FLYER",SET_DELETING_FLYER_SUCCESS:"SET_DELETING_FLYER_SUCCESS",SET_DELETING_FLYER_FAIL:"SET_DELETING_FLYER_FAIL",SET_EDITING_FLYER:"SET_EDITING_FLYER",SET_EDITING_FLYER_SUCCESS:"SET_EDITING_FLYER_SUCCESS",SET_EDITING_FLYER_FAIL:"SET_EDITING_FLYER_FAIL",SET_USING_TEMPLATE:"SET_USING_TEMPLATE"};t.a={USER:a,LOCATION:r,FLYER:l}},436:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(33),c=n.n(l),o=n(10),i=n(13),s=n(27),u=n(14);function m(){var e=Object(u.a)(["\n  html {\n    height: 100%;\n    /*background-color: red;*/\n  }\n  * {\n    padding: 0;\n    margin: 0;\n  }\n\n  /*Button colors override  */\n  .btn-primary {\n    background-color: #4CAD98;\n    border-color: #4CAD98;\n  }\n  .btn-primary:hover {\n    backgrond-color: #61FAD9;\n  }\n\n  .btn-secondary {\n    background-color: #61FAD9;\n    border-color: #61FAD9;\n  }\n\n  .link {\n    cursor: pointer;\n    color: #2A3DAD;\n  }\n\n  .slide-pane__header {\n    background: #4863FA;\n    color: #ffffff;\n  }\n\n  // Animations\n  @keyframes blueToLightBlue {\n    0% {\n      border-top-color: #FAB156\n    }\n\n    50% {\n      border-top-color: #4863FA\n    }\n\n    100% {\n      border-top-color: #FAB156\n    }\n  }\n"]);return m=function(){return e},e}var d=Object(i.b)(m()),p=(n(231),n(38)),E=n(16),f=n(7),g=n(6),y=n(454),h=n(455),b=n(456),S=n(457),O=n(458),F=n(459),_=n(460),v=n(461),j=n(452),L=n(2),I=n(464),T=n(449),x=n(450),N=n(451),R=n(453);function C(){var e=Object(u.a)(["\n  display: flex;\n\n  .CheckBoxItem {\n    display: inline-block;\n\n    .form-check-input {\n      width: 25px;\n      position: unset;\n      margin-top: unset;\n      margin-left: unset;\n    }\n  }\n"]);return C=function(){return e},e}function P(){var e=Object(u.a)(["\n  width: 100%;  \n  margin-bottom: 20px;\n\n  & label {\n    display: block;\n  }\n  & input {\n    width: 100%;\n  }\n  & .password-container {\n    position: relative;\n    &__show {\n      position: absolute;\n      right: 10px;\n      top: 6px;\n      color: ",";\n      cursor: pointer;\n    }\n  }\n"]);return P=function(){return e},e}function U(){var e=Object(u.a)(["\n  max-width: 600px;\n"]);return U=function(){return e},e}var w=i.c.section(U()),k=i.c.div(P(),(function(e){return e.theme.colors.green})),A=i.c.div(C()),Y=function(e){return e.trim().match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)?"":"Not a Valid Email"},D=function(e){var t=e.indexOf(".");switch(e.slice(t+1,e.length)){case"png":case"PNG":return!0;case"jpg":case"JPG":return!0;case"jpeg":case"JPEG":return!0;case"gif":case"GIF":return!0;default:return!1}},G=Object(o.b)((function(e){return{user:e.user}}),{loginUser:f.loginUser})((function(e){var t=e.modal,n=e.toggleModal,l=e.changeModalType,c=e.loginUser,o=e.user,i=Object(a.useState)(""),s=Object(g.a)(i,2),u=s[0],m=s[1],d=Object(a.useState)(""),p=Object(g.a)(d,2),E=p[0],f=p[1],y=Object(a.useState)({email:""}),h=Object(g.a)(y,2),b=h[0],S=h[1],O=Object(a.useState)(!1),F=Object(g.a)(O,2),_=F[0],v=F[1];Object(a.useEffect)((function(){!1===o.loggingIn&&Object.keys(o.currentUser).length>0&&!0===t&&n()}),[o]);return r.a.createElement(I.a,{isOpen:t,toggle:n,className:"sign-in-modal"},r.a.createElement(T.a,null,o.loggingIn?r.a.createElement("p",null,"Loading ..."):r.a.createElement("h3",{className:"text-center"},"Login"),r.a.createElement(w,null,function(){if(o.errors)return o.errors.map((function(e){return r.a.createElement("p",{className:"text-danger"},e.message)}))}(),r.a.createElement("form",{onSubmit:function(e){var t=Object(L.a)({},b);for(var n in e.preventDefault(),t.email=Y(u),S(t),t)if(""!==t[n])return;c(u,E)}},r.a.createElement(k,null,b.email&&r.a.createElement("p",{className:"text-danger"},b.email),r.a.createElement(x.a,{for:"email"},"Email"),r.a.createElement(N.a,{type:"email",name:"email",placeholder:"you@example.com",value:u,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement(k,null,r.a.createElement(x.a,{for:"password"},"Password"),r.a.createElement("div",{className:"password-container"},r.a.createElement(N.a,{type:_?"text":"password",name:"password",value:E,onChange:function(e){return f(e.target.value)},minLength:8,maxLength:20,required:!0}),r.a.createElement("span",{className:"password-container__show",onClick:function(){return v(!_)}},_?"Hide":"Show"))),r.a.createElement(j.a,{color:"primary",type:"submit",block:!0,disabled:!!o.loggingIn},o.loggingIn?r.a.createElement(R.a,{color:"light"}):"SignIn"))),r.a.createElement("div",{className:"switch-form text-center"},r.a.createElement("p",null,"Don't have an account?"," ",r.a.createElement("span",{onClick:function(){return l("register")},className:"link"},"Register")))))})),M=Object(o.b)((function(e){return{user:e.user}}),{registerUser:f.registerUser})((function(e){var t=e.modal,n=e.toggleModal,l=e.changeModalType,c=e.registerUser,o=e.user,i=Object(a.useState)(""),s=Object(g.a)(i,2),u=s[0],m=s[1],d=Object(a.useState)(""),p=Object(g.a)(d,2),E=p[0],f=p[1],y=Object(a.useState)(""),h=Object(g.a)(y,2),b=h[0],S=h[1],O=Object(a.useState)(""),F=Object(g.a)(O,2),_=F[0],v=F[1],C=Object(a.useState)({fullName:"",email:"",password:"",confirmPassword:""}),P=Object(g.a)(C,2),U=P[0],A=P[1],D=Object(a.useState)(!1),G=Object(g.a)(D,2),M=G[0],B=G[1];Object(a.useEffect)((function(){!1===o.registering&&Object.keys(o.currentUser).length>0&&!0===t&&n()}),[o]);return r.a.createElement(I.a,{isOpen:t,toggle:n,className:"sign-in-modal"},r.a.createElement(T.a,null,r.a.createElement("h3",{className:"text-center"},"Register"),r.a.createElement(w,null,function(){if(o.errors)return o.errors.map((function(e){return r.a.createElement("p",{className:"text-danger"},e.message)}))}(),r.a.createElement("form",{onSubmit:function(e){var t=Object(L.a)({},U);for(var n in e.preventDefault(),t.email=Y(E),t.confirmPassword=function(e,t){return e.trim()!==t.trim()?"Passwords do not match. Check your typing.":""}(b,_),A(t),t)if(""!==t[n])return;c(u,E,b)}},r.a.createElement(k,null,r.a.createElement(x.a,{for:"full_name"},"Name"),r.a.createElement(N.a,{type:"text",name:"full_name",placeholder:"Joe Smith",value:u,onChange:function(e){return m(e.target.value)},required:!0})),r.a.createElement(k,null,U.email&&r.a.createElement("p",{className:"text-danger"},U.email),r.a.createElement(x.a,{for:"email"},"Email"),r.a.createElement(N.a,{type:"email",name:"email",placeholder:"you@example.com",value:E,onChange:function(e){return f(e.target.value)},required:!0})),r.a.createElement(k,null,r.a.createElement(x.a,{for:"password"},"Password"),r.a.createElement("div",{className:"password-container"},r.a.createElement(N.a,{type:M?"text":"password",name:"password",value:b,onChange:function(e){return S(e.target.value)},minLength:8,maxLength:20,required:!0}),r.a.createElement("span",{className:"password-container__show",onClick:function(){return B(!M)}},M?"Hide":"Show"))),r.a.createElement(k,null,U.confirmPassword&&r.a.createElement("p",{className:"text-danger"},U.confirmPassword),r.a.createElement(x.a,{for:"confirm_password"},"Confirm Password"),r.a.createElement(N.a,{type:M?"text":"password",name:"confirm_password",value:_,onChange:function(e){return v(e.target.value)},minLength:8,maxLength:20,required:!0})),r.a.createElement(j.a,{color:"primary",type:"submit",block:!0,disabled:!!o.registering},o.registering?r.a.createElement(R.a,{color:"light"}):"Register"))),r.a.createElement("div",{className:"switch-form text-center"},r.a.createElement("p",null,"Already have an account?"," ",r.a.createElement("span",{onClick:function(){return l("signin")},className:"link"},"Signin")))))}));function B(){var e=Object(u.a)(["\n  .navbar {\n    background-color: ",";\n  }\n  & .navbar-brand {\n    color: ",";\n    font-size: 1.6rem;\n  }\n .navbar-light .navbar-nav .nav-item .nav-link {\n    color: "," !important;\n  }\n"]);return B=function(){return e},e}var q=i.c.div(B(),(function(e){return e.theme.colors.blue}),(function(e){return e.theme.colors.logo}),(function(e){return e.theme.colors.white})),W=Object(o.b)((function(e){return{user:e.user}}),{logoutUser:f.logoutUser})((function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(g.a)(o,2),s=i[0],u=i[1],m=Object(a.useState)("signin"),d=Object(g.a)(m,2),E=d[0],f=d[1],L=function(){return u(!s)},I=function(){return Object.keys(e.user.currentUser).length>0};return r.a.createElement(q,null,r.a.createElement(y.a,{light:!0,expand:"md"},r.a.createElement(h.a,{tag:p.b,to:"/"},"Noticely"),r.a.createElement(b.a,{onClick:function(){return c(!l)}}),r.a.createElement(S.a,{isOpen:l,navbar:!0},r.a.createElement(O.a,{className:"mr-auto",navbar:!0},r.a.createElement(F.a,null,r.a.createElement(_.a,{tag:p.b,to:"/"},"Home")),I()&&r.a.createElement(F.a,null,r.a.createElement(_.a,{tag:p.b,to:"/manage"},"Manage"))),r.a.createElement(v.a,null,I()?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"primary",onClick:function(){return e.logoutUser()}},"Logout")):r.a.createElement(j.a,{color:"primary",onClick:function(){return L()}},"Sign In"),"signin"===E?r.a.createElement(G,{modal:s,toggleModal:L,changeModalType:f}):r.a.createElement(M,{modal:s,toggleModal:L,changeModalType:f})))))}));function H(){var e=Object(u.a)(["\n\n    & .MapContainer {\n        \n    } \n\n    & .BtnControls {\n        display: flex;\n        justify-content: space-between;\n        align-items: baseline;\n        margin-bottom: 20px;\n        width: 100%;\n    }\n\n    & .about {\n        margin-top: 20px;\n        border: 1px solid #ccc;\n        padding: 1rem;\n        background-color: #eee;\n\n        li {\n            list-style: none;\n        }\n    }\n"]);return H=function(){return e},e}var z=i.c.section(H()),J=function(e){var t=e.children;return r.a.createElement(z,null,t)},V=n(68),K=n(199),X=n.n(K),Z=n(61),$=n(63),Q=n(201),ee=n.n(Q),te=(n(436),function(e,t){return e.length>=t?e.slice(0,t)+"...":e}),ne=function(){var e=window.innerWidth;return e>768?"50%":e<=768&&e>425?"70%":e<=425?"90%":void 0},ae=function(e){return 0===Object.keys(e).length},re=Object(Z.compose)(Object(Z.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAGi7RR7Dtrk8CCZ-SkrLeP2Pr8bZfiyKA","&v=3&libraries=geometry,drawing,places"),loadingElement:r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(R.a,{color:"success"})),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Object(Z.lifecycle)({componentWillMount:function(){var e=this,t={};this.setState({bounds:null,center:{lat:this.props.location.ipLocation.lat,lng:this.props.location.ipLocation.lng},markers:[],onMapMounted:function(e){t.map=e},onBoundsChanged:function(){e.setState({bounds:t.map.getBounds(),center:t.map.getCenter()})},onSearchBoxMounted:function(e){t.searchBox=e},onPlacesChanged:function(){var n=t.searchBox.getPlaces();if(console.log("places",n),le(n,e.props)){var a={placeId:n[0].place_id,formatted_address:n[0].formatted_address,name:n[0].name,latlng:{lat:n[0].geometry.location.lat(),lng:n[0].geometry.location.lng()}};e.props.setSelectedPlace(a),e.props.setOpenFlyerPane(!0);var r=new google.maps.LatLngBounds;n.forEach((function(e){e.geometry.viewport?r.union(e.geometry.viewport):r.extend(e.geometry.location)}));var l=n.map((function(e){return{position:e.geometry.location,name:e.name,place_id:e.place_id}})),c=X.a.get(l,"0.position",e.state.center);console.log("markers",e.state.markers),console.log("nextmarkers",l),e.setState({center:c,markers:l})}}})},componentDidMount:function(){this.props.getPlaces()},componentDidUpdate:function(e,t){null===e.location.selectedPlace||ae(e.location.selectedPlace)||null!==this.props.location.selectedPlace||this.setState({state:this.state})}}),$.withScriptjs,$.withGoogleMap)((function(e){return r.a.createElement($.GoogleMap,{ref:e.onMapMounted,defaultZoom:10,defaultCenter:e.center,onBoundsChanged:e.onBoundsChanged,className:"Map"},r.a.createElement(ee.a,{ref:e.onSearchBoxMounted,bounds:e.bounds,controlPosition:2,onPlacesChanged:e.onPlacesChanged},r.a.createElement("input",{type:"text",placeholder:"Search location for flyers",className:"Map_Input"})),e.markers.map((function(t,n){return console.log("props",e),r.a.createElement($.Marker,{key:n,position:t.position,title:t.name,onClick:function(){e.onPlacesChanged(),e.setOpenFlyerPane(!0)}})})),e.location.allPlaces.map((function(t,n){var a={lat:parseFloat(t.latlng.lat),lng:parseFloat(t.latlng.lng)},l={placeId:t.place_id,formatted_address:t.formattedAddress,name:t.name,latlng:{lat:parseFloat(t.latlng.lat),lng:parseFloat(t.latlng.lng)}};return r.a.createElement($.Marker,{key:n,position:a,title:t.name,onClick:function(){e.setSelectedPlace(l),e.setOpenFlyerPane(!0)}})})))})),le=function(e,t){var n=!1;if(0===e.length||!e[0].address_components)return t.setValidPlace(!1),!1;var a,r=Object(V.a)(e[0].address_components);try{for(r.s();!(a=r.n()).done;){"street_number"===a.value.types[0]&&(n=!0)}}catch(l){r.e(l)}finally{r.f()}return n?(t.setValidPlace(!0),!0):(t.setValidPlace(!1),!1)},ce=Object(o.b)((function(e){return{location:e.location,flyerRedux:e.flyer}}),{setValidPlace:f.setValidPlace,setSelectedPlace:f.setSelectedPlace,setOpenFlyerPane:f.setOpenFlyerPane,getPlaces:f.getPlaces})(re),oe=(n(191),n(202)),ie=n(462),se=Object(o.b)((function(e){return{flyer:e.flyer}}),{deleteFlyer:f.deleteFlyer})(Object(E.f)((function(e){var t=e.modal,n=e.toggleModal,a=e.flyer,l=e.deleteFlyer,c=e.history;return r.a.createElement(I.a,{isOpen:t,toggle:n},r.a.createElement(T.a,null,r.a.createElement("p",null,"Are you sure you want to delete this flyer?"),a.errors&&function(){if(a.errors)return a.errors.map((function(e,t){return r.a.createElement("p",{key:t,className:"text-danger"},e.message)}))}()),r.a.createElement(ie.a,null,r.a.createElement(j.a,{color:"primary",onClick:function(){l(a.selectedFlyer,c.push)}},"Yes")," ",r.a.createElement(j.a,{color:"secondary",onClick:function(){return n(!1)}},"No")))}))),ue=Object(o.b)((function(e){return{reduxLocation:e.location,flyer:e.flyer}}),{setSelectedPlace:f.setSelectedPlace,setFlyersInit:f.setFlyersInit,setOpenFlyerPane:f.setOpenFlyerPane,setWishToDeleteFlyer:f.setWishToDeleteFlyer,setUsingTemplate:f.setUsingTemplate})((function(e){var t=e.children,n=e.setSelectedPlace,a=e.setFlyersInit,l=e.setOpenFlyerPane,c=e.setWishToDeleteFlyer,o=e.setUsingTemplate,i=e.flyer,s=e.reduxLocation,u=e.manageMode;return r.a.createElement("div",null,r.a.createElement(oe.a,{isOpen:i.openFlyerPane,from:"left",width:ne(),title:"".concat(((s||{}).selectedPlace||{}).name||""),shouldCloseOnEsc:!0,onRequestClose:function(){u||a([]),l(!1),i.usingTemplate||n(null),o(!1)}},t),r.a.createElement(se,{modal:i.wishToDeleteFlyer,toggleModal:c}))}));function me(){var e=Object(u.a)(["\n    height: 80%;\n    min-height: 500px;\n    overflow-y: auto;\n"]);return me=function(){return e},e}var de=i.c.section(me()),pe=function(e){var t=e.children;return r.a.createElement(de,null,t)},Ee=n(60),fe=n(463),ge=n(121),ye=n(123);function he(){var e=Object(u.a)(["\n    & .flyer-list-item-wrapper {\n        width: 80%;\n        padding: 20px;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        margin-bottom: 25px;\n        border-top: 10px solid #FAB156;\n        transition: all .3s;\n    }\n    & .flyer-list-item-wrapper.belongsToUser{\n        animation-name: blueToLightBlue;\n        animation-iteration-count: infinite;\n        animation-duration: 2s;\n    }\n\n    & .flyer-list-item-wrapper:hover {\n        cursor: pointer;\n        box-shadow: 6px 6px 14px 2px rgba(0,0,0,0.75);\n        transform: translateX(6px);\n        border-top: 10px solid #4CAD98;\n    }\n    & .flyer-controls {\n        justify-content: flex-end;\n\n        .btn {\n            margin-left: 10px;\n        }\n    }\n"]);return he=function(){return e},e}var be=i.c.section(he()),Se=function(e){var t=e.children;return r.a.createElement(be,null,t)},Oe=Object(o.b)(null,{setSelectedFlyer:f.setSelectedFlyer,setWishToDeleteFlyer:f.setWishToDeleteFlyer})(Object(E.f)((function(e){var t=e.flyer,n=e.belongsToUser,a=e.setSelectedFlyer,l=e.setWishToDeleteFlyer,c=e.history;return r.a.createElement(Se,null,r.a.createElement("div",{className:"flyer-list-item-wrapper ".concat(n?"belongsToUser":""),onClick:function(){a(t),c.push("/view-flyer")}},r.a.createElement("h3",null,t.heading),r.a.createElement("p",null,te(t.description,49)),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(fe.a,{className:"flyer-controls"},r.a.createElement(j.a,{color:"warning",size:"sm",onClick:function(e){e.stopPropagation(),a(t),c.push("/edit-flyer")}},r.a.createElement(ge.a,{icon:ye.a})),r.a.createElement(j.a,{color:"danger",size:"sm",onClick:function(e){e.stopPropagation(),a(t),l(!0)}}," ",r.a.createElement(ge.a,{icon:ye.b})," ")))))}))),Fe=Object(o.b)((function(e){return{reduxLocation:e.location,reduxFlyer:e.flyer,user:e.user}}),{getFlyersByPlace:Ee.c})((function(e){var t=e.reduxLocation,n=e.reduxFlyer,l=e.getFlyersByPlace,c=e.user;Object(a.useEffect)((function(){l(t.selectedPlace.placeId)}),[]);var o=function(e){return!(!e.user||ae(c.currentUser)||e.user._id!==c.currentUser._id)};return r.a.createElement(pe,null,n.flyers.length>0&&n.flyers.map((function(e,t){return r.a.createElement(Oe,{flyer:e,belongsToUser:o(e)})})),n.fetchingFlyers&&r.a.createElement(R.a,{color:"success"}),!n.fetchingFlyers&&0===n.flyers.length&&r.a.createElement("p",null,"There are no flyer notices here. Would you like to place one here?"))})),_e=Object(o.b)((function(e){return{reduxLocation:e.location,flyer:e.flyer,user:e.user}}),{setIpLocation:f.setIpLocation,setSelectedPlace:f.setSelectedPlace,setFlyersInit:f.setFlyersInit,setOpenFlyerPane:f.setOpenFlyerPane,setSelectedFlyer:f.setSelectedFlyer,setInitialMapShow:f.setInitialMapShow})((function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),l=n[0],c=n[1],o=Object(a.useState)(!1),i=Object(g.a)(o,2),s=i[0],u=i[1],m=Object(a.useState)(!1),d=Object(g.a)(m,2),p=d[0],E=d[1];Object(a.useEffect)((function(){return e.setSelectedFlyer({}),e.reduxLocation.initialMapShow&&u(!0),function(){Object(f.setFlyersInit)([])}}),[]),Object(a.useEffect)((function(){!0===s&&(E(!0),navigator.geolocation.getCurrentPosition((function(t){E(!1);var n={lat:t.coords.latitude,lng:t.coords.longitude};e.setIpLocation(n),c(!0),setTimeout((function(){e.setFlyersInit([])}),1e3),e.setSelectedPlace(null)})))}),[s]);return r.a.createElement(J,null,r.a.createElement("div",{className:"MapContainer"},r.a.createElement("div",{className:"BtnControls"},r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){u(!s),e.setInitialMapShow()},className:"btn btn-info"},s?"Hide":"Show"," Map "," ",p&&r.a.createElement(R.a,{size:"sm",color:"light"}))),r.a.createElement("p",null,Object.keys(e.user.currentUser).length>0?e.user.currentUser.name:"Anonymous User")),!1===e.reduxLocation.validPlace&&r.a.createElement("p",{className:"text-danger"},"Your search is too broad. Please search a business location or address."),l&&s&&r.a.createElement(ce,null),r.a.createElement(ue,null,r.a.createElement(j.a,{color:"primary",outline:!1,onClick:function(){return e.history.push("/make-flyer")}},"Place flyer here"),r.a.createElement("hr",null),r.a.createElement(Fe,null))),r.a.createElement("div",{className:"about"},r.a.createElement("h2",null,"What is Noticely?"),r.a.createElement("hr",null),r.a.createElement("p",null,'Noticely is designed the bring the "age-old" task of "putting up flyers" into the future. It used to be that if you wanted to make notices or spread information, you would have to:'),r.a.createElement("ul",null,r.a.createElement("li",null,"Design flyer and print out many copies."),r.a.createElement("li",null,"Find locations with high foot traffic to place the flyers."),r.a.createElement("li",null,"Physically walk to each location."),r.a.createElement("li",null,"Many times, the location does not have a designated area to place your flyer.")),r.a.createElement("h2",null,"How does Noticely help?"),r.a.createElement("hr",null),r.a.createElement("p",null,"Noticely simplifies this process. "),r.a.createElement("ul",null,r.a.createElement("li",null,"No more wasting paper; the flyers are virtual! "),r.a.createElement("li",null,"Find a location with ease using our map. Simply Search any location."),r.a.createElement("li",null,"Select a location and immediately create a flyer there."),r.a.createElement("li",null,"No more worrying if the place has a designated area for flyers."))))})),ve=n(11),je=n.n(ve),Le=n(17),Ie=n(12),Te=n.n(Ie);function xe(){var e=Object(u.a)(["\n    height: 80%;\n    min-height: 500px;\n    overflow-y: auto;\n"]);return xe=function(){return e},e}var Ne=i.c.section(xe()),Re=function(e){var t=e.children;return r.a.createElement(Ne,null,t)};function Ce(){var e=Object(u.a)(["\n    & .flyer-list-item-wrapper {\n        width: 80%;\n        padding: 20px;\n        border: 1px solid #ccc;\n        border-radius: 5px;\n        margin-bottom: 25px;\n        border-top: 10px solid #FAB156;\n        transition: all .3s;\n    }\n    & .flyer-list-item-wrapper.belongsToUser{\n        animation-name: blueToLightBlue;\n        animation-iteration-count: infinite;\n        animation-duration: 2s;\n    }\n\n    & .flyer-list-item-wrapper:hover {\n        cursor: pointer;\n        box-shadow: 6px 6px 14px 2px rgba(0,0,0,0.75);\n        transform: translateX(6px);\n        border-top: 10px solid #4CAD98;\n    }\n\n"]);return Ce=function(){return e},e}var Pe=i.c.section(Ce()),Ue=function(e){var t=e.children;return r.a.createElement(Pe,null,t)},we=Object(o.b)(null,{setSelectedFlyer:f.setSelectedFlyer})(Object(E.f)((function(e){var t=e.flyer,n=e.belongsToUser,a=e.setSelectedFlyer,l=e.history;return r.a.createElement(Ue,null,r.a.createElement("div",{className:"flyer-list-item-wrapper ".concat(n?"belongsToUser":""),onClick:function(){console.log("reach here"),a(t),l.push("/make-from-template")}},r.a.createElement("h3",null,t.heading),r.a.createElement("p",null,te(t.description,49))))}))),ke=Object(o.b)((function(e){return{reduxLocation:e.location,reduxFlyer:e.flyer,user:e.user}}),{getFlyersByUser:Ee.d})((function(e){e.reduxLocation;var t=e.reduxFlyer,n=e.getFlyersByUser,l=e.user;Object(a.useEffect)((function(){n(l.currentUser._id)}),[]);var c=function(e){return!(!e.user||ae(l.currentUser)||e.user._id!==l.currentUser._id)};return r.a.createElement(Re,null,t.flyers.length>0&&t.flyers.filter((function(e,t){return"template"===e.template})).map((function(e,t){return r.a.createElement(we,{key:t,flyer:e,belongsToUser:c(e)})})),t.fetchingFlyers&&r.a.createElement(R.a,{color:"success"}),!t.fetchingFlyers&&0===t.flyers.filter((function(e,t){return"template"===e.template})).length&&r.a.createElement("p",null,"There are no templates to chose from. When making a flyer, check off the option to make flyer into a template."))})),Ae=Object(o.b)((function(e){return{reduxLocation:e.location,flyer:e.flyer,user:e.user}}),{makeFlyer:f.makeFlyer,setOpenFlyerPane:f.setOpenFlyerPane,setUsingTemplate:f.setUsingTemplate})((function(e){var t=e.reduxLocation,n=e.flyer,l=e.user,c=e.makeFlyer,o=e.setOpenFlyerPane,i=e.setUsingTemplate,u=e.history,m=Object(a.useState)(""),d=Object(g.a)(m,2),p=d[0],E=d[1],f=Object(a.useState)(0),y=Object(g.a)(f,2),h=y[0],b=y[1],S=Object(a.useState)(""),O=Object(g.a)(S,2),F=O[0],_=O[1],v=Object(a.useState)(""),I=Object(g.a)(v,2),T=I[0],C=I[1],P=Object(a.useState)(""),U=Object(g.a)(P,2),G=U[0],M=U[1],B=Object(a.useState)(""),q=Object(g.a)(B,2),W=q[0],H=q[1],z=Object(a.useState)(""),J=Object(g.a)(z,2),V=J[0],K=J[1],X=Object(a.useState)(""),Z=Object(g.a)(X,2),$=Z[0],Q=Z[1],ee=Object(a.useState)(""),te=Object(g.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(""),le=Object(g.a)(re,2),ce=le[0],oe=le[1],ie=Object(a.useState)({heading:"",description:"",email:"",imgNum:"",img1:"",img2:"",phone:""}),se=Object(g.a)(ie,2),me=se[0],de=se[1],pe=function(){return Object.keys(l.currentUser).length>0},Ee=function(){var e=Object(Le.a)(je.a.mark((function e(t){var n,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.a.post("/graphql",JSON.stringify({query:'\n                        query {\n                            signS3(s3Input: {fileName: "'.concat(t.name,'", fileType: "').concat(t.type,'"}) {\n                                signedRequest,\n                                url\n                            } \n                        }\n                    ')}));case 3:n=e.sent,a=n.data.data.signS3,fe(t,a.signedRequest,a.url),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(Le.a)(je.a.mark((function e(t,n,a){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{delete Te.a.defaults.headers.common.Authorization,Te()({method:"put",url:n,data:t,headers:{"Content-Type":t.type}}),0===h?_(a):1===h&&C(a),s.a.setSession(l.currentUser.token)}catch(r){console.dir("error",r)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return o(!1),t.selectedPlace||u.push("/"),function(){o(!1)}}),[]),Object(a.useEffect)((function(){n.selectedFlyer&&Object.keys(n.selectedFlyer).length>0&&!n.usingTemplate&&u.push("/view-flyer")}),[n]),r.a.createElement("div",null,r.a.createElement("h2",null,"Make Your Flyer"),r.a.createElement("h5",null,"at ",(t.selectedPlace||{}).name),pe()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"primary",onClick:function(){o(!0),i(!0)}},"Use a saved template"),r.a.createElement("span",null," ","or create a new flyer below")),r.a.createElement("hr",null),r.a.createElement(w,null,function(){if(n.errors)return n.errors.map((function(e){return r.a.createElement("p",{className:"text-danger"},e.message)}))}(),r.a.createElement("form",{onSubmit:function(e){de(Object(L.a)(Object(L.a)({},me),{},{imgNum:""})),e.preventDefault();var n=Object(L.a)({},me);for(var a in n.heading=p.trim().length>100?"Heading must not be more than 100 characters":"",n.description=G.trim().length<3?"Heading must be more than 3 characters":"",n.description=G.trim().length>2e3?"Body must not be more than 2000 characters":"",n.description=G.trim().length<3?"Body must be more than 3 characters":"",n.phone=$&&ne.trim().length>30?"Phone must be less than 30 characters":"",n.phone=$&&!/[0-9]/.test(ne)&&"Phone must be all numbers",n.email=V&&"Not a Valid Email"===Y(W)&&"Email is invalid",de(n),n){if("boolean"===typeof n[a]&&!0===n[a])return;if("string"===typeof n[a]&&n[a].length>0&&"imgNum"!==a)return}var r=[];F&&r.push(F),T&&r.push(T);var l={placeId:t.selectedPlace.placeId,formattedAddress:t.selectedPlace.formatted_address,latlng:t.selectedPlace.latlng,name:t.selectedPlace.name,images:r,heading:p,description:G,phone:$?ne:"",email:V?W:"",template:ce};c(l)}},r.a.createElement(k,null,me.heading&&r.a.createElement("p",{className:"text-danger"},me.heading),r.a.createElement(x.a,{for:"heading"},"Flyer Heading"),r.a.createElement(N.a,{type:"text",name:"heading",onChange:function(e){return E(e.target.value)},required:!0})),pe()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Num of Pics Uploaded: ",h,"/2"),r.a.createElement(k,null,me.imgNum&&r.a.createElement("p",{className:"text-danger"},me.imgNum),r.a.createElement(x.a,{for:"img"},"Upload Image"),r.a.createElement(N.a,{type:"file",name:"img",id:"flyerImg",onChange:function(e){return function(e){if(0===h)if(de(Object(L.a)(Object(L.a)({},me),{},{img1:""})),D(e.target.value)){if(b(1),null!==e.target.files){var t=e.target.files[0];Ee(t)}}else de(Object(L.a)(Object(L.a)({},me),{},{img1:"Wrong File Type"}));else if(1===h)if(de(Object(L.a)(Object(L.a)({},me),{},{img2:""})),D(e.target.value)){if(b(2),null!==e.target.files){var n=e.target.files[0];Ee(n)}}else de(Object(L.a)(Object(L.a)({},me),{},{img2:"Wrong File Type"}));else de(Object(L.a)(Object(L.a)({},me),{},{imgNum:"Max of 2 images. This current image was not uploaded."}))}(e)}}))),r.a.createElement(k,null,me.description&&r.a.createElement("p",{className:"text-danger"},me.description),r.a.createElement(x.a,{for:"description"},"Body",pe()?"":"*"),r.a.createElement(N.a,{type:"textarea",name:"description",rows:"7",onChange:function(e){return M(e.target.value)},required:!0})),pe()?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null,r.a.createElement(x.a,{for:"img"},"Contact Information"),r.a.createElement("small",null,'Deselect "Email" to use registered email'),r.a.createElement(A,null,r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"email",onChange:function(e){return K(""==V?e.target.value:"")}})," ","Email"),r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"addPhone",onChange:function(e){return Q(""==$?e.target.value:"")}})," "," Phone"))),V&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"email"},"Email "),me.email&&r.a.createElement("p",{className:"text-danger"},me.email),r.a.createElement(N.a,{type:"email",name:"email",onChange:function(e){return H(e.target.value)}})),$&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"phone"},"Phone"),me.phone&&r.a.createElement("p",{className:"text-danger"},me.phone),r.a.createElement(N.a,{type:"tel",name:"phone",onChange:function(e){return ae(e.target.value)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("cite",{className:"text-muted d-block"},"*Anonymous users must put their contact info in the body."),r.a.createElement("cite",{className:"text-muted d-block"},"SignIn/Register to have more options for your flyers.")),pe()&&r.a.createElement(k,null,r.a.createElement(x.a,null,r.a.createElement(N.a,{type:"checkbox",value:"template",onChange:function(e){return oe(""==ce?e.target.value:"")}})," ","Want to make this flyer a template for future use?")),r.a.createElement(j.a,{type:"submit",color:"primary",outline:!1,disabled:!!n.makingFlyer},n.makingFlyer?r.a.createElement(R.a,{color:"light"}):"Make Flyer"))),pe()&&r.a.createElement(ue,null,r.a.createElement(ke,null)))})),Ye=n(204),De=n.n(Ye);function Ge(){var e=Object(u.a)(["\n    & .flyer-page {\n        margin-top: 20px;\n        min-height: 400px;\n        border: 1px solid #8492a6;\n        padding: 1rem;\n        box-shadow: 6px 6px 14px 2px rgba(0,0,0,0.75);\n\n        &__body {\n            white-space: pre-wrap;\n            word-break: break-word;\n        }\n    }\n\n"]);return Ge=function(){return e},e}var Me=i.c.section(Ge()),Be=function(e){var t=e.children;return r.a.createElement(Me,null,t)};function qe(){var e=Object(u.a)(["\n    & .photo-view__images {\n        display: flex;\n        width: 100%;\n        flex-wrap: wrap;\n\n        figure {\n            max-width: 50px;\n            max-height: 50px;\n            margin-right: 10px;\n            cursor: pointer;\n            transition: all .3s;\n\n            img {\n                width: 100%;\n            }\n        }\n        figure:hover {\n            transform: scale(1.05);\n        }\n    }\n    \n    & .photo-view__display {\n        figure {\n            max-width: 200px;\n            max-height: 200px;\n            img {\n                width: 100%;\n            }\n        }\n    }\n"]);return qe=function(){return e},e}var We=i.c.section(qe()),He=function(e){var t=e.children;return r.a.createElement(We,null,t)},ze=function(e){var t=e.images,n=Object(a.useState)(""),l=Object(g.a)(n,2),c=l[0],o=l[1];return r.a.createElement(He,null,r.a.createElement("div",{className:"photo-view__images"},t.map((function(e,t){return r.a.createElement("figure",{key:t,onClick:function(){return o(e)}},r.a.createElement("img",{src:e,className:"img-fluid"}))}))),r.a.createElement("div",{className:"photo-view__display"},c?r.a.createElement("figure",null,r.a.createElement("img",{src:c})):null))},Je=Object(o.b)((function(e){return{flyer:e.flyer}}),{setSelectedFlyer:f.setSelectedFlyer,setFlyersInit:f.setFlyersInit,setOpenFlyerPane:f.setOpenFlyerPane})((function(e){var t=e.flyer,n=e.history,l=e.setSelectedFlyer,c=e.setFlyersInit,o=e.setOpenFlyerPane,i=t.selectedFlyer;i=i||{},Object(a.useEffect)((function(){return 0===Object.keys(i).length&&n.push("/"),c([]),o(!1),function(){l({})}}),[]);return Object.keys(i).length>0?r.a.createElement(Be,null,r.a.createElement("h2",null,"Flyer Notification"),r.a.createElement("div",{className:"flyer-page"},r.a.createElement("h3",null,i.heading),r.a.createElement("hr",null),r.a.createElement("cite",{className:"text-muted"},"Posted by: ",i.user?i.user.name:"Anonymous"," on ",De.a.unix(i.createdAt/1e3).format("MM/DD/YY")),r.a.createElement(ze,{images:i.images||[],editable:!1}),r.a.createElement("div",{className:"flyer-page__body"},i.description),Object.keys(i.contact).length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("h5",null,"Contact Info"),i.contact.email&&r.a.createElement("p",null,"Email: ",i.contact.email),i.contact.phone&&r.a.createElement("p",null,"Phone: ",i.contact.phone)))):r.a.createElement(Be,null,r.a.createElement("p",null,"loading.."))}));function Ve(){var e=Object(u.a)(["\n    & .manage-list {\n\n        &__container {\n            display: flex;\n            flex-wrap: wrap;\n        }\n        &__item {\n            width: 250px;\n            border: 1px solid #ccc;\n            margin-right: 1rem;\n            margin-bottom: 1rem;\n            border-radius: 3px;\n            cursor: pointer;\n            transition: all .3s;\n\n            &__header {\n                padding: 1rem;\n                background-color: ",";\n                color: ",";\n\n                h5 {\n                    margin-bottom: 0px;\n                }\n            }\n            &__body {\n                padding: 1rem;\n            }\n        }\n        &__item:hover {\n            transform: translateX(3px);\n            box-shadow: 5px 5px 12px 2px rgba(0,0,0,0.75);\n        }\n    }\n"]);return Ve=function(){return e},e}var Ke=i.c.section(Ve(),(function(e){return e.theme.colors.green}),(function(e){return e.theme.colors.white})),Xe=function(e){var t=e.children;return r.a.createElement(Ke,null,t)},Ze=Object(o.b)((function(e){return{flyer:e.flyer,user:e.user}}),{getFlyersByUser:f.getFlyersByUser,setOpenFlyerPane:f.setOpenFlyerPane,setSelectedPlace:f.setSelectedPlace,setDeletedFlyer:f.setDeletedFlyer,setFlyersInit:f.setFlyersInit})((function(e){var t=e.flyer,n=e.user,l=e.history,c=e.getFlyersByUser,o=e.setOpenFlyerPane,i=e.setSelectedPlace,s=e.setDeletedFlyer,u=e.setFlyersInit,m=Object(a.useState)([]),d=Object(g.a)(m,2),p=d[0],E=d[1];Object(a.useEffect)((function(){if(u([]),!ae(n.currentUser))return c(n.currentUser._id),o(!1),function(){s({})};l.push("/")}),[]),Object(a.useEffect)((function(){c(n.currentUser._id)}),[t.deletedFlyer]);return r.a.createElement(Xe,null,r.a.createElement("h2",null,"Manage Flyers"),r.a.createElement("hr",null),t.fetchingflyers&&r.a.createElement("div",null,r.a.createElement(R.a,{color:"dark",size:"sm"})),!t.fetchingflyers&&t.flyers&&t.flyers.length>0?function(){var e,n=[],a=Object(V.a)(t.flyers);try{for(a.s();!(e=a.n()).done;){var l=e.value;n.includes(l.placeId.place_id)||n.push(l.placeId.place_id)}}catch(h){a.e(h)}finally{a.f()}for(var c=[],s=0,u=n;s<u.length;s++){var m,d=u[s],f=[],g=Object(V.a)(t.flyers);try{for(g.s();!(m=g.n()).done;){var y=m.value;d===y.placeId.place_id&&f.push(y)}}catch(h){g.e(h)}finally{g.f()}c.push(f)}return r.a.createElement("div",{className:"manage-list"},r.a.createElement("div",{className:"manage-list__container"},c.map((function(e,t){return r.a.createElement("div",{className:"manage-list__item",key:t,onClick:function(){return function(e){o(!0),i(e[0].placeId),E(e)}(e)}},r.a.createElement("div",{className:"manage-list__item__header"},r.a.createElement("h5",null,"string"!==typeof e[0].placeId&&te(e[0].placeId.name,17))),r.a.createElement("div",{className:"manage-list__item__body"},r.a.createElement("cite",null,"string"!==typeof e[0].placeId&&e[0].placeId.formattedAddress),r.a.createElement("hr",null),r.a.createElement("p",null,e.length," flyer notice(s)")))}))),r.a.createElement(ue,{manageMode:!0},p.map((function(e,t){return r.a.createElement(Oe,{flyer:e,belongsToUser:!0,key:t})})),0===p.length&&r.a.createElement("p",null,"No Flyers at this location ")))}():r.a.createElement("p",null,"There are no flyers to manage yet. You must create a flyer first."))}));function $e(){var e=Object(u.a)(["\n    & .edit-pics {\n        display: flex;\n        flex-wrap: wrap;\n\n        &__item {\n            width: 125px;\n            height: auto;\n            margin-right: 15px;\n            border: 1px solid #ccc;\n\n            &__controls {\n                border-bottom: 1px solid #ccc;\n                text-align: right;\n                padding-right: 5px;\n\n                span {\n                    cursor: pointer;\n                }\n            }\n            figure {\n                padding: 1rem;\n\n                img {\n                    width: 100%;\n                }\n            }\n        }\n    }\n"]);return $e=function(){return e},e}var Qe=i.c.section($e()),et=function(e){var t=e.children;return r.a.createElement(Qe,null,t)},tt=Object(o.b)((function(e){return{reduxLocation:e.location,flyer:e.flyer,user:e.user}}),{editFlyer:f.editFlyer,setOpenFlyerPane:f.setOpenFlyerPane})((function(e){var t=e.reduxLocation,n=e.flyer,l=e.user,c=e.editFlyer,o=e.history,i=e.setOpenFlyerPane,u=Object(a.useState)((n.selectedFlyer||{}).heading||""),m=Object(g.a)(u,2),d=m[0],p=m[1],E=Object(a.useState)(((n.selectedFlyer||{}).images||[]).length),f=Object(g.a)(E,2),y=f[0],h=f[1],b=Object(a.useState)(((n.selectedFlyer||{}).images||[]).length>0?n.selectedFlyer.images[0]:""),S=Object(g.a)(b,2),O=S[0],F=S[1],_=Object(a.useState)(((n.selectedFlyer||{}).images||[]).length>1?n.selectedFlyer.images[1]:""),v=Object(g.a)(_,2),I=v[0],T=v[1],C=Object(a.useState)((n.selectedFlyer||{}).description||""),P=Object(g.a)(C,2),U=P[0],G=P[1],M=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).email?n.selectedFlyer.contact.email:""),B=Object(g.a)(M,2),q=B[0],W=B[1],H=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).email?"email":""),z=Object(g.a)(H,2),J=z[0],V=z[1],K=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).phone?n.selectedFlyer.contact.phone:""),X=Object(g.a)(K,2),Z=X[0],$=X[1],Q=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).phone?"phone":""),ee=Object(g.a)(Q,2),te=ee[0],ne=ee[1],re=Object(a.useState)("template"===(n.selectedFlyer||{}).template?"template":""),le=Object(g.a)(re,2),ce=le[0],oe=le[1],ie=Object(a.useState)({heading:"",description:"",email:"",imgNum:"",img1:"",img2:"",phone:""}),se=Object(g.a)(ie,2),ue=se[0],me=se[1],de=function(){return Object.keys(l.currentUser).length>0},pe=function(){var e=Object(Le.a)(je.a.mark((function e(t){var n,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.a.post("/graphql",JSON.stringify({query:'\n                        query {\n                            signS3(s3Input: {fileName: "'.concat(t.name,'", fileType: "').concat(t.type,'"}) {\n                                signedRequest,\n                                url\n                            } \n                        }\n                    ')}));case 3:n=e.sent,a=n.data.data.signS3,Ee(t,a.signedRequest,a.url),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(Le.a)(je.a.mark((function e(t,n,a){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{delete Te.a.defaults.headers.common.Authorization,Te()({method:"put",url:n,data:t,headers:{"Content-Type":t.type}}),0===y?F(a):1===y&&T(a),s.a.setSession(l.currentUser.token)}catch(r){console.dir("error",r)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),fe=function(e,t){1===t?(F(I),T("")):2===t&&T(""),h(y-1)};return Object(a.useEffect)((function(){return ae(n.selectedFlyer)&&o.push("/"),function(){i(!1)}}),[]),n.selectedFlyer?r.a.createElement(et,null,r.a.createElement("h2",null,"Edit Your Flyer"),r.a.createElement("h5",null,(t.selectedPlace||{}).name),r.a.createElement("hr",null),r.a.createElement(w,null,function(){if(n.errors)return n.errors.map((function(e){return r.a.createElement("p",{className:"text-danger"},e.message)}))}(),r.a.createElement("form",{onSubmit:function(e){me(Object(L.a)(Object(L.a)({},ue),{},{imgNum:""})),e.preventDefault();var a=Object(L.a)({},ue);for(var r in a.heading=d.trim().length>100?"Heading must not be more than 100 characters":"",a.description=U.trim().length<3?"Heading must be more than 3 characters":"",a.description=U.trim().length>2e3?"Body must not be more than 2000 characters":"",a.description=U.trim().length<3?"Body must be more than 3 characters":"",a.phone=te&&Z.trim().length>30?"Phone must be less than 30 characters":"",a.phone=te&&!/[0-9]/.test(Z)&&"Phone must be all numbers",a.email=J&&"Not a Valid Email"===Y(q)&&"Email is invalid",me(a),a){if("boolean"===typeof a[r]&&!0===a[r])return;if("string"===typeof a[r]&&a[r].length>0)return}var l=[];O&&l.push(O),I&&l.push(I);var i={_id:n.selectedFlyer._id,placeId:t.selectedPlace.placeId,formattedAddress:t.selectedPlace.formatted_address,latlng:t.selectedPlace.latlng,name:t.selectedPlace.name,images:l,heading:d,description:U,phone:te?Z:"",email:J?q:"",template:ce};c(i,(function(){return o.push("/view-flyer")}))}},r.a.createElement(k,null,ue.heading&&r.a.createElement("p",{className:"text-danger"},ue.heading),r.a.createElement(x.a,{for:"heading"},"Flyer Heading"),r.a.createElement(N.a,{type:"text",name:"heading",value:d,onChange:function(e){return p(e.target.value)},required:!0})),de()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Num of Pics Uploaded: ",y,"/2"),r.a.createElement("div",{className:"edit-pics"},""!==O&&r.a.createElement("div",{className:"edit-pics__item"},r.a.createElement("p",{className:"edit-pics__item__controls"},r.a.createElement("span",{onClick:function(){return fe(0,1)}},"X")),r.a.createElement("figure",null,r.a.createElement("img",{src:O}))),""!==I&&r.a.createElement("div",{className:"edit-pics__item"},r.a.createElement("p",{className:"edit-pics__item__controls"},r.a.createElement("span",{onClick:function(){return fe(0,2)}},"X")),r.a.createElement("figure",null,r.a.createElement("img",{src:I})))),r.a.createElement(k,null,ue.imgNum&&r.a.createElement("p",{className:"text-danger"},ue.imgNum),r.a.createElement(x.a,{for:"img"},"Upload Image"),r.a.createElement(N.a,{type:"file",name:"img",id:"flyerImg",onChange:function(e){return function(e){if(0===y)if(me(Object(L.a)(Object(L.a)({},ue),{},{img1:""})),D(e.target.value)){if(h(1),null!==e.target.files){var t=e.target.files[0];pe(t)}}else me(Object(L.a)(Object(L.a)({},ue),{},{img1:"Wrong File Type"}));else if(1===y)if(me(Object(L.a)(Object(L.a)({},ue),{},{img2:""})),D(e.target.value)){if(h(2),null!==e.target.files){var n=e.target.files[0];pe(n)}}else me(Object(L.a)(Object(L.a)({},ue),{},{img2:"Wrong File Type"}));else me(Object(L.a)(Object(L.a)({},ue),{},{imgNum:"Max of 2 images. This current image was not uploaded."}))}(e)}}))),r.a.createElement(k,null,ue.description&&r.a.createElement("p",{className:"text-danger"},ue.description),r.a.createElement(x.a,{for:"description"},"Body",de()?"":"*"),r.a.createElement(N.a,{type:"textarea",name:"description",rows:"7",value:U,onChange:function(e){return G(e.target.value)},required:!0})),de()?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null,r.a.createElement(x.a,{for:"img"},"Contact Information"),r.a.createElement("small",null,'Deselect "Email" to use registered email'),r.a.createElement(A,null,r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"email",checked:!!J,onChange:function(e){return V(""==J?e.target.value:"")}})," ","Email"),r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"addPhone",checked:!!te,onChange:function(e){return ne(""==te?e.target.value:"")}})," "," Phone"))),J&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"email"},"Email "),ue.email&&r.a.createElement("p",{className:"text-danger"},ue.email),r.a.createElement(N.a,{type:"email",name:"email",value:q,onChange:function(e){return W(e.target.value)}})),te&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"phone"},"Phone"),ue.phone&&r.a.createElement("p",{className:"text-danger"},ue.phone),r.a.createElement(N.a,{type:"tel",name:"phone",value:Z,onChange:function(e){return $(e.target.value)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("cite",{className:"text-muted d-block"},"*Anonymous users must put their contact info in the body."),r.a.createElement("cite",{className:"text-muted d-block"},"SignIn/Register to have more options for your flyers.")),de()&&r.a.createElement(k,null,r.a.createElement(x.a,null,r.a.createElement(N.a,{type:"checkbox",name:"template",value:"template",checked:!!ce,onChange:function(e){return oe(""==ce?e.target.value:"")}})," ","Want to make this flyer a template for future use?")),r.a.createElement(j.a,{type:"submit",color:"primary",outline:!1,disabled:!!n.editingFlyer},n.editingFlyer?r.a.createElement(R.a,{color:"light"}):"Edit Flyer")))):null})),nt=Object(o.b)((function(e){return{reduxLocation:e.location,flyer:e.flyer,user:e.user}}),{makeFlyer:f.makeFlyer,setOpenFlyerPane:f.setOpenFlyerPane,setUsingTemplate:f.setUsingTemplate})((function(e){var t=e.reduxLocation,n=e.flyer,l=e.user,c=e.makeFlyer,o=e.setOpenFlyerPane,i=e.setUsingTemplate,u=e.history,m=Object(a.useState)((n.selectedFlyer||{}).heading||""),d=Object(g.a)(m,2),p=d[0],E=d[1],f=Object(a.useState)(0),y=Object(g.a)(f,2),h=y[0],b=y[1],S=Object(a.useState)(""),O=Object(g.a)(S,2),F=O[0],_=O[1],v=Object(a.useState)(""),I=Object(g.a)(v,2),T=I[0],C=I[1],P=Object(a.useState)((n.selectedFlyer||{}).description||""),U=Object(g.a)(P,2),G=U[0],M=U[1],B=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).email?n.selectedFlyer.contact.email:""),q=Object(g.a)(B,2),W=q[0],H=q[1],z=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).email?"email":""),J=Object(g.a)(z,2),V=J[0],K=J[1],X=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).phone?n.selectedFlyer.contact.phone:""),Z=Object(g.a)(X,2),$=Z[0],Q=Z[1],ee=Object(a.useState)(((n.selectedFlyer||{}).contact||{}).phone?"phone":""),te=Object(g.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(""),le=Object(g.a)(re,2),ce=le[0],oe=le[1],ie=Object(a.useState)({heading:"",description:"",email:"",imgNum:"",img1:"",img2:"",phone:""}),se=Object(g.a)(ie,2),ue=se[0],me=se[1],de=function(){return Object.keys(l.currentUser).length>0},pe=function(){var e=Object(Le.a)(je.a.mark((function e(t){var n,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te.a.post("/graphql",JSON.stringify({query:'\n                        query {\n                            signS3(s3Input: {fileName: "'.concat(t.name,'", fileType: "').concat(t.type,'"}) {\n                                signedRequest,\n                                url\n                            } \n                        }\n                    ')}));case 3:n=e.sent,a=n.data.data.signS3,Ee(t,a.signedRequest,a.url),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(Le.a)(je.a.mark((function e(t,n,a){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{delete Te.a.defaults.headers.common.Authorization,Te()({method:"put",url:n,data:t,headers:{"Content-Type":t.type}}),0===h?_(a):1===h&&C(a),s.a.setSession(l.currentUser.token)}catch(r){console.dir("error",r)}case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return o(!1),t.selectedPlace||u.push("/"),function(){o(!1),i(!1)}}),[]),Object(a.useEffect)((function(){n.selectedFlyer&&Object.keys(n.selectedFlyer).length>0&&!n.usingTemplate&&u.push("/view-flyer")}),[n]),r.a.createElement("div",null,r.a.createElement("h2",null,"Make Your Flyer"),r.a.createElement("h5",null,"at ",(t.selectedPlace||{}).name),r.a.createElement("hr",null),r.a.createElement(w,null,function(){if(n.errors)return n.errors.map((function(e){return r.a.createElement("p",{className:"text-danger"},e.message)}))}(),r.a.createElement("form",{onSubmit:function(e){me(Object(L.a)(Object(L.a)({},ue),{},{imgNum:""})),e.preventDefault();var n=Object(L.a)({},ue);for(var a in n.heading=p.trim().length>100?"Heading must not be more than 100 characters":"",n.description=G.trim().length<3?"Heading must be more than 3 characters":"",n.description=G.trim().length>2e3?"Body must not be more than 2000 characters":"",n.description=G.trim().length<3?"Body must be more than 3 characters":"",n.phone=ne&&$.trim().length>30?"Phone must be less than 30 characters":"",n.phone=ne&&!/[0-9]/.test($)&&"Phone must be all numbers",n.email=V&&"Not a Valid Email"===Y(W)&&"Email is invalid",me(n),n){if("boolean"===typeof n[a]&&!0===n[a])return;if("string"===typeof n[a]&&n[a].length>0&&"imgNum"!==a)return}var r=[];F&&r.push(F),T&&r.push(T);var l={placeId:t.selectedPlace.placeId,formattedAddress:t.selectedPlace.formatted_address,latlng:t.selectedPlace.latlng,name:t.selectedPlace.name,images:r,heading:p,description:G,phone:ne?$:"",email:V?W:"",template:ce};c(l)}},r.a.createElement(k,null,ue.heading&&r.a.createElement("p",{className:"text-danger"},ue.heading),r.a.createElement(x.a,{for:"heading"},"Flyer Heading"),r.a.createElement(N.a,{type:"text",name:"heading",value:p,onChange:function(e){return E(e.target.value)},required:!0})),de()&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Num of Pics Uploaded: ",h,"/2"),r.a.createElement(k,null,ue.imgNum&&r.a.createElement("p",{className:"text-danger"},ue.imgNum),r.a.createElement(x.a,{for:"img"},"Upload Image"),r.a.createElement(N.a,{type:"file",name:"img",id:"flyerImg",onChange:function(e){return function(e){if(0===h)if(me(Object(L.a)(Object(L.a)({},ue),{},{img1:""})),D(e.target.value)){if(b(1),null!==e.target.files){var t=e.target.files[0];pe(t)}}else me(Object(L.a)(Object(L.a)({},ue),{},{img1:"Wrong File Type"}));else if(1===h)if(me(Object(L.a)(Object(L.a)({},ue),{},{img2:""})),D(e.target.value)){if(b(2),null!==e.target.files){var n=e.target.files[0];pe(n)}}else me(Object(L.a)(Object(L.a)({},ue),{},{img2:"Wrong File Type"}));else me(Object(L.a)(Object(L.a)({},ue),{},{imgNum:"Max of 2 images. This current image was not uploaded."}))}(e)}}))),r.a.createElement(k,null,ue.description&&r.a.createElement("p",{className:"text-danger"},ue.description),r.a.createElement(x.a,{for:"description"},"Body",de()?"":"*"),r.a.createElement(N.a,{type:"textarea",name:"description",value:G,rows:"7",onChange:function(e){return M(e.target.value)},required:!0})),de()?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null,r.a.createElement(x.a,{for:"img"},"Contact Information"),r.a.createElement("small",null,'Deselect "Email" to use registered email'),r.a.createElement(A,null,r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"email",checked:!!V,onChange:function(e){return K(""==V?e.target.value:"")}})," ","Email"),r.a.createElement("div",{className:"CheckBoxItem"},r.a.createElement(N.a,{type:"checkbox",value:"addPhone",checked:!!ne,onChange:function(e){return ae(""==ne?e.target.value:"")}})," "," Phone"))),V&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"email"},"Email "),ue.email&&r.a.createElement("p",{className:"text-danger"},ue.email),r.a.createElement(N.a,{type:"email",name:"email",value:W,onChange:function(e){return H(e.target.value)}})),ne&&r.a.createElement(k,null,r.a.createElement(x.a,{for:"phone"},"Phone"),ue.phone&&r.a.createElement("p",{className:"text-danger"},ue.phone),r.a.createElement(N.a,{type:"tel",name:"phone",value:$,onChange:function(e){return Q(e.target.value)}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("cite",{className:"text-muted d-block"},"*Anonymous users must put their contact info in the body."),r.a.createElement("cite",{className:"text-muted d-block"},"SignIn/Register to have more options for your flyers.")),de()&&r.a.createElement(k,null,r.a.createElement(x.a,null,r.a.createElement(N.a,{type:"checkbox",value:"template",checked:!!ce,onChange:function(e){return oe(""==ce?e.target.value:"")}})," ","Want to make this flyer a template for future use?")),r.a.createElement(j.a,{type:"submit",color:"primary",outline:!1,disabled:!!n.makingFlyer},n.makingFlyer?r.a.createElement(R.a,{color:"light"}):"Make Flyer"))))})),at=Object(o.b)((function(e){return{}}),{getUserInfo:f.getUserInfo})((function(e){var t=e.getUserInfo;return Object(a.useEffect)((function(){s.a.getSession()&&t()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(W,null),r.a.createElement("div",{className:"container mt-4 mb-4"},r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",component:_e}),r.a.createElement(E.a,{exact:!0,path:"/make-flyer",component:Ae}),r.a.createElement(E.a,{exact:!0,path:"/make-from-template",component:nt}),r.a.createElement(E.a,{exact:!0,path:"/view-flyer",component:Je}),r.a.createElement(E.a,{exact:!0,path:"/manage",component:Ze}),r.a.createElement(E.a,{exact:!0,path:"/edit-flyer",component:tt})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rt=n(52),lt=n(205),ct=(n(447),n(4)),ot={registering:!1,loggingIn:!1,currentUser:{},errors:null},it={ipLocation:{lat:41.50071,lng:-74.021347},initialMapShow:!1,validPlace:null,selectedPlace:null,allPlaces:[],errors:null,gettingPlaces:!1},st={openFlyerPane:!1,flyerMade:!1,makingFlyer:!1,editingFlyer:!1,fetchingFlyers:!1,flyers:[],selectedFlyer:{},wishToDeleteFlyer:!1,deletingFlyer:!1,deletedFlyer:{},usingTemplate:!1,errors:null},ut=Object(rt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct.a.USER.REGISTER_USER:return Object(L.a)(Object(L.a)({},e),{},{registering:!0});case ct.a.USER.REGISTER_USER_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{registering:!1,currentUser:t.payload});case ct.a.USER.REGISTER_USER_FAIL:return Object(L.a)(Object(L.a)({},e),{},{registering:!1,errors:t.payload});case ct.a.USER.LOGIN_USER:return Object(L.a)(Object(L.a)({},e),{},{loggingIn:!0});case ct.a.USER.LOGIN_USER_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{loggingIn:!1,currentUser:t.payload});case ct.a.USER.LOGIN_USER_FAIL:return Object(L.a)(Object(L.a)({},e),{},{loggingIn:!1,errors:t.payload});case ct.a.USER.LOGOUT_USER:return Object(L.a)({},ot);default:return e}},location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct.a.LOCATION.SET_IP_LOCATION:return Object(L.a)(Object(L.a)({},e),{},{ipLocation:t.payload});case ct.a.LOCATION.INITIAL_MAP_SHOW:return Object(L.a)(Object(L.a)({},e),{},{initialMapShow:!0});case ct.a.LOCATION.SET_VALID_PLACE:return Object(L.a)(Object(L.a)({},e),{},{validPlace:t.payload});case ct.a.LOCATION.SET_SELECTED_PLACE:return Object(L.a)(Object(L.a)({},e),{},{selectedPlace:t.payload});case ct.a.LOCATION.GET_PLACES:return Object(L.a)(Object(L.a)({},e),{},{gettingPlaces:!0});case ct.a.LOCATION.GET_PLACES_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{gettingPlaces:!1,allPlaces:t.payload});case ct.a.LOCATION.GET_PLACES_ERROR:return Object(L.a)(Object(L.a)({},e),{},{gettingPlaces:!1,errors:t.payload});default:return e}},flyer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct.a.FLYER.SET_FLYERS:return Object(L.a)(Object(L.a)({},e),{},{fetchingFlyers:!0});case ct.a.FLYER.SET_FLYERS_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{flyers:t.payload,fetchingFlyers:!1,errors:null});case ct.a.FLYER.SET_FLYERS_FAIL:return Object(L.a)(Object(L.a)({},e),{},{fetchingFlyers:!1,errors:t.payload});case ct.a.FLYER.OPEN_FLYER_PANE:return Object(L.a)(Object(L.a)({},e),{},{openFlyerPane:t.payload});case ct.a.FLYER.SET_MAKING_FLYER:return Object(L.a)(Object(L.a)({},e),{},{makingFlyer:!0});case ct.a.FLYER.SET_MAKING_FLYER_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{makingFlyer:!1,flyerMade:!0,selectedFlyer:t.payload,usingTemplate:!1,errors:null});case ct.a.FLYER.SET_MAKING_FLYER_FAIL:return Object(L.a)(Object(L.a)({},e),{},{makingFlyer:!1,flyerMade:!1,errors:t.payload});case ct.a.FLYER.SET_EDITING_FLYER:return Object(L.a)(Object(L.a)({},e),{},{editingFlyer:!0});case ct.a.FLYER.SET_EDITING_FLYER_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{editingFlyer:!1,flyerMade:!0,selectedFlyer:t.payload,errors:null});case ct.a.FLYER.SET_EDITING_FLYER_FAIL:return Object(L.a)(Object(L.a)({},e),{},{editingFlyer:!1,flyerMade:!1,errors:t.payload});case ct.a.FLYER.SET_SELECTED_FLYER:return Object(L.a)(Object(L.a)({},e),{},{selectedFlyer:t.payload});case ct.a.FLYER.SET_WISH_TO_DELETE_FLYER:return Object(L.a)(Object(L.a)({},e),{},{wishToDeleteFlyer:t.payload});case ct.a.FLYER.SET_DELETING_FLYER:return Object(L.a)(Object(L.a)({},e),{},{deletingFlyer:t.payload});case ct.a.FLYER.SET_DELETED_FLYER:return Object(L.a)(Object(L.a)({},e),{},{deletedFlyer:t.payload});case ct.a.FLYER.SET_DELETING_FLYER_SUCCESS:return Object(L.a)(Object(L.a)({},e),{},{deletingFlyer:!1,deletedFlyer:t.payload});case ct.a.FLYER.SET_DELETING_FLYER_FAIL:return Object(L.a)(Object(L.a)({},e),{},{deletingFlyer:!1,errors:t.payload});case ct.a.FLYER.SET_USING_TEMPLATE:return Object(L.a)(Object(L.a)({},e),{},{usingTemplate:t.payload});default:return e}}}),mt=[lt.a],dt=rt.a.apply(void 0,mt)(rt.d)(ut);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:dt},r.a.createElement(i.a,{theme:{colors:{logo:"#FAB156",blue:"#2A3DAD",blueLight:"#4863FA",green:"#4CAD98",greenLight:"#61FAD9",white:"#FFFFFF",textPrimary:"#060d46",textSecondary:"#8492a6"},spacers:{},mediaQueries:{below425:"only screen and (max-width: 425px)",below768:"only screen and (max-width: 768px)",below1024:"only screen and (max-width: 1024px)",below1440:"only screen and (max-width: 1440px)"}}},r.a.createElement(d,null),r.a.createElement(at,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return E})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return h})),n.d(t,"j",(function(){return b}));var a=n(11),r=n.n(a),l=n(17),c=n(4),o=n(12),i=n.n(o),s=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(n){var a,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:c.a.FLYER.SET_MAKING_FLYER,payload:!0}),t.prev=1,t.next=4,i.a.post("/graphql",JSON.stringify({query:'\n                        mutation {\n                            makeFlyer(flyerInput: {\n                                placeId: "'.concat(e.placeId,'", formattedAddress: "').concat(e.formattedAddress,'" , \n                                latlng: {lat:"').concat(e.latlng.lat,'", lng: "').concat(e.latlng.lng,'"},\n                                name: "').concat(e.name,'", heading: "').concat(e.heading,'", \n                                description: """').concat(e.description,'""", images: "').concat(e.images,'",\n                                contact: {phone:"').concat(e.phone,'", email: "').concat(e.email,'"},\n                                template: "').concat(e.template,'"\n                            }) {\n                                _id\n                                placeId\n                                user {\n                                  _id\n                                  name\n                                  email\n                                }\n                                images\n                                heading\n                                description\n                                contact {\n                                  phone\n                                  email\n                                }\n                                template\n                                createdAt\n                                updatedAt\n                            }\n                        } \n                    ')}));case 4:a=t.sent,l=a.data.data.makeFlyer,n({type:c.a.FLYER.SET_MAKING_FLYER_SUCCESS,payload:l}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:c.a.FLYER.SET_MAKING_FLYER_FAIL,payload:t.t0.response.data.errors});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},u=function(e,t){return function(){var n=Object(l.a)(r.a.mark((function n(a){var l,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:c.a.FLYER.SET_EDITING_FLYER,payload:!0}),n.prev=1,n.next=4,i.a.post("/graphql",JSON.stringify({query:'\n                        mutation {\n                            editFlyer(editFlyerInput: {\n                                _id: "'.concat(e._id,'",\n                                placeId: "').concat(e.placeId,'", formattedAddress: "').concat(e.formattedAddress,'" , \n                                latlng: {lat:"').concat(e.latlng.lat,'", lng: "').concat(e.latlng.lng,'"},\n                                name: "').concat(e.name,'", heading: "').concat(e.heading,'", \n                                description: """').concat(e.description,'""", images: "').concat(e.images,'",\n                                contact: {phone:"').concat(e.phone,'", email: "').concat(e.email,'"},\n                                template: "').concat(e.template,'"\n                            }) {\n                                _id\n                                placeId\n                                user {\n                                  _id\n                                  name\n                                  email\n                                }\n                                images\n                                heading\n                                description\n                                contact {\n                                  phone\n                                  email\n                                }\n                                template\n                                createdAt\n                                updatedAt\n                            }\n                        } \n                    ')}));case 4:l=n.sent,o=l.data.data.editFlyer,a({type:c.a.FLYER.SET_EDITING_FLYER_SUCCESS,payload:o}),t(),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.dir("error",n.t0),a({type:c.a.FLYER.SET_EDITING_FLYER_FAIL,payload:n.t0.response.data.errors});case 14:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()},m=function(e){return{type:c.a.FLYER.OPEN_FLYER_PANE,payload:e}},d=function(e){return{type:c.a.FLYER.SET_FLYERS_SUCCESS,payload:e}},p=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(n){var a,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:c.a.FLYER.SET_FLYERS}),t.prev=1,t.next=4,i.a.post("graphql",JSON.stringify({query:'\n          query {\n            getFlyersByPlace(flyersByPlaceInput: {place_id: "'.concat(e,'"}) {\n              _id\n              placeId \n              user {\n                _id\n                name\n                email\n              }\n              heading\n              description\n              images\n              contact {\n                phone\n                email\n              }\n              template\n              createdAt\n              updatedAt\n            }\n          }\n        ')}));case 4:a=t.sent,l=a.data.data.getFlyersByPlace,n({type:c.a.FLYER.SET_FLYERS_SUCCESS,payload:l}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:c.a.FLYER.SET_FLYERS_FAIL,payload:t.t0.response.data.errors});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(l.a)(r.a.mark((function t(n){var a,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:c.a.FLYER.SET_FLYERS}),t.prev=1,t.next=4,i.a.post("graphql",JSON.stringify({query:'\n          query {\n            getFlyersByUser(userId: "'.concat(e,'") {\n              _id\n              placeId {\n                _id\n                place_id\n                name\n                formattedAddress\n              }\n              user {\n                _id\n                name\n                email\n              }\n              heading\n              description\n              images\n              contact {\n                phone\n                email\n              }\n              template\n              createdAt\n              updatedAt\n            }\n          }\n        ')}));case 4:a=t.sent,l=a.data.data.getFlyersByUser,n({type:c.a.FLYER.SET_FLYERS_SUCCESS,payload:l}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:c.a.FLYER.SET_FLYERS_FAIL,payload:t.t0.response.data.errors});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return{type:c.a.FLYER.SET_SELECTED_FLYER,payload:e}},g=function(e){return{type:c.a.FLYER.SET_WISH_TO_DELETE_FLYER,payload:e}},y=function(e,t){return function(){var n=Object(l.a)(r.a.mark((function n(a){var l,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:c.a.FLYER.SET_DELETING_FLYER,payload:!0}),n.prev=1,n.next=4,i.a.post("graphql",JSON.stringify({query:'\n          mutation {\n            deleteFlyer(flyerId:"'.concat(e._id,'") {\n              _id\n              placeId \n              user {\n                _id\n                name\n                email\n              }\n              heading\n              description\n              images\n              contact {\n                phone\n                email\n              }\n              template\n              createdAt\n              updatedAt\n            }\n          }\n        ')}));case 4:l=n.sent,o=l.data.data.deleteFlyer,a({type:c.a.FLYER.SET_DELETING_FLYER_SUCCESS,payload:o}),a({type:c.a.FLYER.SET_WISH_TO_DELETE_FLYER,payload:!1}),a({type:c.a.FLYER.OPEN_FLYER_PANE,payload:!1}),a({type:c.a.FLYER.SET_SELECTED_FLYER,payload:{}}),t("/manage"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),a({type:c.a.FLYER.SET_DELETING_FLYER_FAIL,payload:n.t0.response.data.errors});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()},h=function(e){return{type:c.a.FLYER.SET_DELETED_FLYER,payload:e}},b=function(e){return{type:c.a.FLYER.SET_USING_TEMPLATE,payload:e}}},7:function(e,t,n){"use strict";var a=n(134);n.o(a,"deleteFlyer")&&n.d(t,"deleteFlyer",(function(){return a.deleteFlyer})),n.o(a,"editFlyer")&&n.d(t,"editFlyer",(function(){return a.editFlyer})),n.o(a,"getFlyersByUser")&&n.d(t,"getFlyersByUser",(function(){return a.getFlyersByUser})),n.o(a,"getPlaces")&&n.d(t,"getPlaces",(function(){return a.getPlaces})),n.o(a,"getUserInfo")&&n.d(t,"getUserInfo",(function(){return a.getUserInfo})),n.o(a,"loginUser")&&n.d(t,"loginUser",(function(){return a.loginUser})),n.o(a,"logoutUser")&&n.d(t,"logoutUser",(function(){return a.logoutUser})),n.o(a,"makeFlyer")&&n.d(t,"makeFlyer",(function(){return a.makeFlyer})),n.o(a,"registerUser")&&n.d(t,"registerUser",(function(){return a.registerUser})),n.o(a,"setDeletedFlyer")&&n.d(t,"setDeletedFlyer",(function(){return a.setDeletedFlyer})),n.o(a,"setFlyersInit")&&n.d(t,"setFlyersInit",(function(){return a.setFlyersInit})),n.o(a,"setInitialMapShow")&&n.d(t,"setInitialMapShow",(function(){return a.setInitialMapShow})),n.o(a,"setIpLocation")&&n.d(t,"setIpLocation",(function(){return a.setIpLocation})),n.o(a,"setOpenFlyerPane")&&n.d(t,"setOpenFlyerPane",(function(){return a.setOpenFlyerPane})),n.o(a,"setSelectedFlyer")&&n.d(t,"setSelectedFlyer",(function(){return a.setSelectedFlyer})),n.o(a,"setSelectedPlace")&&n.d(t,"setSelectedPlace",(function(){return a.setSelectedPlace})),n.o(a,"setUsingTemplate")&&n.d(t,"setUsingTemplate",(function(){return a.setUsingTemplate})),n.o(a,"setValidPlace")&&n.d(t,"setValidPlace",(function(){return a.setValidPlace})),n.o(a,"setWishToDeleteFlyer")&&n.d(t,"setWishToDeleteFlyer",(function(){return a.setWishToDeleteFlyer}));var r=n(135);n.d(t,"getUserInfo",(function(){return r.a})),n.d(t,"loginUser",(function(){return r.b})),n.d(t,"logoutUser",(function(){return r.c})),n.d(t,"registerUser",(function(){return r.d}));var l=n(136);n.d(t,"getPlaces",(function(){return l.a})),n.d(t,"setInitialMapShow",(function(){return l.b})),n.d(t,"setIpLocation",(function(){return l.c})),n.d(t,"setSelectedPlace",(function(){return l.d})),n.d(t,"setValidPlace",(function(){return l.e}));var c=n(60);n.d(t,"deleteFlyer",(function(){return c.a})),n.d(t,"editFlyer",(function(){return c.b})),n.d(t,"getFlyersByUser",(function(){return c.d})),n.d(t,"makeFlyer",(function(){return c.e})),n.d(t,"setDeletedFlyer",(function(){return c.f})),n.d(t,"setFlyersInit",(function(){return c.g})),n.d(t,"setOpenFlyerPane",(function(){return c.h})),n.d(t,"setSelectedFlyer",(function(){return c.i})),n.d(t,"setUsingTemplate",(function(){return c.j})),n.d(t,"setWishToDeleteFlyer",(function(){return c.k}))}},[[206,1,2]]]);
//# sourceMappingURL=main.a1c21bff.chunk.js.map